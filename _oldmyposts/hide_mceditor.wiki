== mc map editor 使用说明 ==
=== 编辑地图 ===
==== 简易操作流程 ====
# `File - new project` 新建工程[[res/newp.png]]
{{{
请新建一个文件夹供工程使用,其下的map文件都会保存在同文件夹下
}}}
# `File - new map` 新建地图(Ctrl+N)[[res/new.png]]
{{{
必须有工程打开着才能创建地图,保存在工程文件同文件夹下
}}}
# `Pic - import pic` 导入图片[[res/import.png]]
{{{
请尽量用PNG图片,windows下不支持jpg和gif图片
可同时打开多个图片文件
选中图片按del键可以删除
"清空"按钮可清空导入的图片列表
导入时使用"切割图片",可把图片切割成固定大小的块,格式为"宽*高",为0表示此方向不切割
}}}
# 添加图片到地图中
{{{
拖动图片列表中的图片到编辑区域,图片将加入当前选中的图层中
* 块编辑模式下的操作方法见块编辑模式帮助
}}}
# 选择图片
{{{
单击图片选中图片,不会选中不可见层的图片
ESC可取消选中图片
按住ctrl可选中多个图片
tab和shift-tab键可以在同一层内切换选中图片
}}}
# 移动图片
{{{
状态栏会显示当前被选中图片的位置,格式为(left,top)-(right,bottom),表示图片左上角和右下角的坐标
选中图片后可拖动改变位置
用上下左右按键可以按像素移动当前选中图片
按住ctrl可以移动多个图片
}}}
# `A`键编辑图片属性[[res/picattr.png]]
{{{
首先需要在菜单'Project - 属性id管理'里创建属性,id必须为整数,描述可为中文
然后选中一个图片按'A'或点编辑图片属性按钮编辑属性,选择属性,输入值,添加,确定
右键单击某条属性会出现删除选项
}}}
# 图片操作
{{{
菜单'Pic'下面可以对图片进行镜像,旋转,缩放
}}}
# 删除图片
{{{
普通编辑模式下选中地图中的图片按del键
}}}
# `Ctrl+S` 保存[[res/save.png]]
{{{
.mcm为工程文件
.map为地图文件(程序有此文件即可解析)
保存后会在工程文件夹下生成attrids.txt和picids.txt,是此工程的属性的描述和图片id锁对应的路径,需要跟程序交流说明
}}}
# `File - open project` 打开工程[[res/openp.png]]
{{{
会自动列出工程文件所在文件夹的map文件,双击可打开此地图文件
}}}
==== 层操作 ====
* 窗口的左下角为图层控制区域
* 新建的地图默认有一个层,可以新建,移动,删除图层,编辑时可以锁定或隐藏某个图层
* [[res/new.png]]是添加图层,[[res/up.png]][[res/down.png]]是上下移动图层
* 右键点击图层可以选择删除图层或设置图层属性
* [[res/visual.png]]下打勾表示此图层可见
* [[res/lock.png]]下打勾表示此图层被锁定
*注意*
* 添加图片时是添加到当前选中的图层上的,包括粘贴操作
==== 块编辑模式 ====
* 激活 按下图标[[res/blockmode.png]]进入块编辑模式 需设置块大小 格式"宽*高"
* 添加 在图片列表中选中一个图片,鼠标在编辑区域点击或按下并移动会将选中的图片粘贴在所处块区域,本层此区域原有的图片会被删除
* 选择,移动,设置属性,删除 都需要进入普通编辑模式才能操作
* 退出 再次点击图标[[res/blockmode.png]]进入普通编辑模式
* 在块编辑模式下,鼠标移到图标[[res/blockmode.png]]上会显示当前块大小
==== 小技巧 ====
* 软件的标题栏会显示当前的工程和map
* 所有列表的删除都在右键菜单
* 按住shift后拖动图片可以在原图片的图层复制出属性完全一样的图片,粘贴是复制到选中层,shift复制是复制到原图层
* 菜单`Map - 快照`可导出地图当前的状态为PNG图片
* 支持undo(`Ctrl+Z`)和redo(`Ctrl+Y`)
* 支持剪切(`Ctrl+X`),复制(`Ctrl+C`),粘贴(`Ctrl+V`)操作
* 可用[[res/go-left.png]][[res/go-right.png]][[res/go-top.png]][[res/go-bottom.png]]对齐图片
* 图片id的路径不存在时可在`Project - 图片id管理`里编辑图片id的路径. *请慎用此功能.修改图片id将可能导致.map的id没有对应值*
* `Project - 工程设置...`和`Map - 地图设置`里可以设置自定义保存脚本(在./hooks下)',详情请看hooks目录下hook脚本的例子和开发文档里的解析指南

=== 地图使用 ===
给程序提供.map文件,并说明picids.txt和attrids.txt

=== 更新记录 ===
* 2012-02-23 `v0.4`
  {{{
  添加了地图属性和层属性的编辑
  }}}
* 2012-01-13 `v0.3`
  {{{
  废弃 `背景编辑模式(Ctrl+B)激活时拉进的图片在下层,取消则添加到上层`
  添加了层的新建,移动,删除等层操作
  添加了块编辑模式
  添加了剪切,复制,粘贴功能
  添加了图片镜像旋转缩放功能
  添加了图片对齐功能
  添加了右键删除地图文件功能
  添加了自定义保存脚本功能
  添加了导出快照图片功能
  各种小调整和修复
  }}}
* 2011-12-07 `v0.2`
  {{{
  工程文件格式改变,新的mceditor可兼容旧的mcm工程文件
      (图片路径使用相对于mcm文件的路径,只要相对路径不变,工程即可直接打开(否则需要编辑图片id)
      (即图片和工程文件可以一起拷贝到别的文件夹或电脑
  所有列表(如属性编辑)都增加了右键删除功能
  加入shift复制图片(包含属性)和ctrl多选
  添加图片id管理功能
  生成的picids.txt也改为使用相对路径
  }}}
* 2011-11-30 `v0.11`
  {{{
  提供基本地图编辑功能.提供固定2层画面
  }}}
